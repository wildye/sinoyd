<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="IE=Edge">
  <title>PageSlide Test</title>

  <style>
    html, body {
      margin: 0;
      height: 100%;
      /*overflow: hidden;*/
    }

    #container,
    .items,
    .item {
      height: 100%;
    }

    /*#container {*/
      /*margin: 0 auto;*/
      /*width: 700px;*/
      /*height: 450px;*/
      /*border: 3px solid #000;*/
      /*z-index: 2;*/
      /*overflow: hidden;*/
    /*}*/

    .items {
      position: relative;
      width: 500%;
    }

    .item {
      width: 20%;
      float: left;
      background-size: cover; /* IE8下为拉伸填充 */
      /*background-size: 100%100%; !* 拉伸填充 *!*/
      background-position: 50% 50%;
      background-repeat: no-repeat;
    }

    :root #item0,
    :root #item1,
    :root #item2,
    :root #item3 {
      filter: none; /* 解决IE9 filter 生效问题 */
    }
    #item0 {
      background-image: url("../static/image/img-1.jpg");
      background-image: none\9; /* IE9及以下取消背景图，使用 filter 方式 */
      filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../static/image/img-1.jpg', sizingMethod='scale'); /* IE9及以下使用 filter 方式引入背景图 */
    }
    #item1 {
      background-image: url("../static/image/img-2.jpg");
      background-image: none\9;
      filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../static/image/img-2.jpg', sizingMethod='scale');
    }
    #item2 {
      background-image: url("../static/image/img-3.jpg");
      background-image: none\9;
      filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../static/image/img-3.jpg', sizingMethod='scale');
    }
    #item3 {
      background-image: url("../static/image/img-4.jpg");
      background-image: none\9;
      filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../static/image/img-4.jpg', sizingMethod='scale');
    }

    .pages {
      position: absolute;
    }
  </style>

</head>
<body>

<div id="container" data-PageSlide>
  <div class="items">
    <div class="item active" id="item0"></div>
    <div class="item" id="item1"></div>
    <div class="item" id="item2"></div>
    <div class="item" id="item3"></div>
  </div>
  <div class="pages"></div>
</div>

<script src="../static/js/jquery-1.12.4.js"></script>
<script>

  ;(function ($) {
    "use strict";

    // 将插件所有方法包装到对象上
    var PageSlide = (function () {

      function PageSlide(element, options) {

        // 选择器返回的DOM元素
        this.element = element;

        // 合并配置参数
        this.settings = $.extend({}, $.fn.PageSlide.defaults, options || {});

        this.init();
      }

      PageSlide.prototype = {

        // 初始化dom结构，布局，分页及绑定事件
        init: function () {

          var self = this;

          self.selectors = self.settings.selectors;

          // 获取 dom 元素
          self.items = self.element.find(self.selectors.items); // 获取页面容器元素
          self.item  = self.items.find(self.selectors.item);    // 获取页面项
          self.pages = self.element.find(self.selectors.page);  // 获取分页控制

          // 追加首元素至末尾.用以css无缝切换
          self.item.eq(0).clone().appendTo(self.items);

          console.log("init");

          // 生成控制点
          if (self.settings.pagination) self._PageControl();

          self.next();

        },

        // 获取页面数量
        pagesCount: function () {
          var self = this;
          console.log(self.item);
          console.log(self.item.length);
          return self.item.length;
        },

        // 上一页
        prev: function () {
          var self = this;

          self.settings.index++;
          self._switchPage();
        },

        // 下一页
        next: function () {
          var self = this;

          self.settings.index--;
          self._switchPage();
        },

        // 切换页面
        _switchPage: function () {
          var self = this,
              size = self.pagesCount();

        },

        // 控制点
        _PageControl: function () {
          var self = this,
              size = self.pagesCount();

          // 生成滑动标识元素span
          for (var i = 0; i < size; i++) {
            self.pages.append("<span></span>");
          }

          // 默认高亮标识
          self.pages.children("span").eq(self.settings.index).addClass("on");

          console.log("_addPageControl");
        }

      };

      return PageSlide;
    })();

    // 注册 jQuery 组件
    $.fn.PageSlide = function (options) {

      // 实现单例模式
      return this.each(function () {
        var me = $(this),
            instance = me.data("PageSlide"); // 获取实例对象

        // 若无此实例，在创建实例对象
        if (!instance) {
          me.data("PageSlide", (instance = new PageSlide(me, options)));
        }
        // 若实例已存在，直接返回
        if ($.type(options) === "string") return instance[options]();
      });

    };

    // 默认配置参数
    $.fn.PageSlide.defaults = {
      selectors: {
        items: ".items",
        item: ".item",
        page: ".pages",
        active: ".active",
      },
      index: 0,         // 初始页索引
      loop: false,      // 启用循环切换
      speed: 500,       // 循环切换间隔
      pagination: true, // 启用分页
      keyboard: true    // 启用键盘控制
    };

  })(jQuery);

  // 实例化插件对象
  $(function () {
    $('[data-PageSlide]').PageSlide({
      speed: 2000,   // 循环切换间隔
    });
  });

</script>
</body>
</html>